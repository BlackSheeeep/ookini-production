"use strict";(self.webpackChunkookini=self.webpackChunkookini||[]).push([[3908],{353:(e,t,i)=>{i.d(t,{Z:()=>E});var n=i(87462),r=i(4942),a=i(29439),o=i(44925),s=i(76821),l=i(81694),u=i.n(l),c=i(88834),d=i(72791),f=i(11354),g=i(75314),v=f.Z.ESC,h=f.Z.TAB;const p=(0,d.forwardRef)((function(e,t){var i=e.overlay,n=e.arrow,r=e.prefixCls,a=(0,d.useMemo)((function(){return"function"===typeof i?i():i}),[i]),o=(0,c.sQ)(t,null===a||void 0===a?void 0:a.ref);return d.createElement(d.Fragment,null,n&&d.createElement("div",{className:"".concat(r,"-arrow")}),d.cloneElement(a,{ref:(0,c.Yr)(a)?o:void 0}))}));var m={adjustX:1,adjustY:1},F=[0,0];const Z={topLeft:{points:["bl","tl"],overflow:m,offset:[0,-4],targetOffset:F},top:{points:["bc","tc"],overflow:m,offset:[0,-4],targetOffset:F},topRight:{points:["br","tr"],overflow:m,offset:[0,-4],targetOffset:F},bottomLeft:{points:["tl","bl"],overflow:m,offset:[0,4],targetOffset:F},bottom:{points:["tc","bc"],overflow:m,offset:[0,4],targetOffset:F},bottomRight:{points:["tr","br"],overflow:m,offset:[0,4],targetOffset:F}};var y=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function V(e,t){var i,l=e.arrow,f=void 0!==l&&l,m=e.prefixCls,F=void 0===m?"rc-dropdown":m,V=e.transitionName,E=e.animation,P=e.align,w=e.placement,C=void 0===w?"bottomLeft":w,k=e.placements,b=void 0===k?Z:k,N=e.getPopupContainer,R=e.showAction,M=e.hideAction,U=e.overlayClassName,A=e.overlayStyle,T=e.visible,O=e.trigger,x=void 0===O?["hover"]:O,I=e.autoFocus,L=e.overlay,S=e.children,W=e.onVisibleChange,H=(0,o.Z)(e,y),D=d.useState(),_=(0,a.Z)(D,2),j=_[0],z=_[1],q="visible"in e?T:j,B=d.useRef(null),Y=d.useRef(null),K=d.useRef(null);d.useImperativeHandle(t,(function(){return B.current}));var Q=function(e){z(e),null===W||void 0===W||W(e)};!function(e){var t=e.visible,i=e.triggerRef,n=e.onVisibleChange,r=e.autoFocus,a=e.overlayRef,o=d.useRef(!1),s=function(){var e,r;t&&(null===(e=i.current)||void 0===e||null===(r=e.focus)||void 0===r||r.call(e),null===n||void 0===n||n(!1))},l=function(){var e;return!(null===(e=a.current)||void 0===e||!e.focus)&&(a.current.focus(),o.current=!0,!0)},u=function(e){switch(e.keyCode){case v:s();break;case h:var t=!1;o.current||(t=l()),t?e.preventDefault():s()}};d.useEffect((function(){return t?(window.addEventListener("keydown",u),r&&(0,g.Z)(l,3),function(){window.removeEventListener("keydown",u),o.current=!1}):function(){o.current=!1}}),[t])}({visible:q,triggerRef:K,onVisibleChange:Q,autoFocus:I,overlayRef:Y});var X=function(){return d.createElement(p,{ref:Y,overlay:L,prefixCls:F,arrow:f})},G=d.cloneElement(S,{className:u()(null===(i=S.props)||void 0===i?void 0:i.className,q&&function(){var t=e.openClassName;return void 0!==t?t:"".concat(F,"-open")}()),ref:(0,c.Yr)(S)?(0,c.sQ)(K,S.ref):void 0}),J=M;return J||-1===x.indexOf("contextMenu")||(J=["click"]),d.createElement(s.Z,(0,n.Z)({builtinPlacements:b},H,{prefixCls:F,ref:B,popupClassName:u()(U,(0,r.Z)({},"".concat(F,"-show-arrow"),f)),popupStyle:A,action:x,showAction:R,hideAction:J,popupPlacement:C,popupAlign:P,popupTransitionName:V,popupAnimation:E,popupVisible:q,stretch:function(){var t=e.minOverlayWidthMatchTrigger,i=e.alignPoint;return"minOverlayWidthMatchTrigger"in e?t:!i}()?"minWidth":"",popup:"function"===typeof L?X:X(),onPopupVisibleChange:Q,onPopupClick:function(t){var i=e.onOverlayClick;z(!1),i&&i(t)},getPopupContainer:N}),G)}const E=d.forwardRef(V)},94781:(e,t,i)=>{i.d(t,{gN:()=>M,zb:()=>V,RV:()=>_,aV:()=>U,ZM:()=>E,ZP:()=>X,cI:()=>H,qo:()=>K});var n=i(72791),r=i(87462),a=i(44925),o=i(74165),s=i(15861),l=i(1413),u=i(93433),c=i(15671),d=i(43144),f=i(97326),g=i(79340),v=i(98557),h=i(4942),p=i(85501),m=i(56481),F=i(60632),Z="RC_FORM_INTERNAL_HOOKS",y=function(){(0,F.ZP)(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")};const V=n.createContext({getFieldValue:y,getFieldsValue:y,getFieldError:y,getFieldWarning:y,getFieldsError:y,isFieldsTouched:y,isFieldTouched:y,isFieldValidating:y,isFieldsValidating:y,resetFields:y,setFields:y,setFieldValue:y,setFieldsValue:y,validateFields:y,submit:y,getInternalHooks:function(){return y(),{dispatch:y,initEntityValue:y,registerField:y,useSubscribe:y,setInitialValues:y,destroyForm:y,setCallbacks:y,registerWatch:y,getFields:y,setValidateMessages:y,setPreserve:y,getInitialValue:y}}});const E=n.createContext(null);var P=i(95321),w=i(49544),C=i(14537),k=["name"],b=[];function N(e,t,i,n,r,a){return"function"===typeof e?e(t,i,"source"in a?{source:a.source}:{}):n!==r}var R=function(e){(0,g.Z)(i,e);var t=(0,v.Z)(i);function i(e){var r;((0,c.Z)(this,i),r=t.call(this,e),(0,h.Z)((0,f.Z)(r),"state",{resetCount:0}),(0,h.Z)((0,f.Z)(r),"cancelRegisterFunc",null),(0,h.Z)((0,f.Z)(r),"mounted",!1),(0,h.Z)((0,f.Z)(r),"touched",!1),(0,h.Z)((0,f.Z)(r),"dirty",!1),(0,h.Z)((0,f.Z)(r),"validatePromise",void 0),(0,h.Z)((0,f.Z)(r),"prevValidating",void 0),(0,h.Z)((0,f.Z)(r),"errors",b),(0,h.Z)((0,f.Z)(r),"warnings",b),(0,h.Z)((0,f.Z)(r),"cancelRegister",(function(){var e=r.props,t=e.preserve,i=e.isListField,n=e.name;r.cancelRegisterFunc&&r.cancelRegisterFunc(i,t,(0,C.gU)(n)),r.cancelRegisterFunc=null})),(0,h.Z)((0,f.Z)(r),"getNamePath",(function(){var e=r.props,t=e.name,i=e.fieldContext.prefixName,n=void 0===i?[]:i;return void 0!==t?[].concat((0,u.Z)(n),(0,u.Z)(t)):[]})),(0,h.Z)((0,f.Z)(r),"getRules",(function(){var e=r.props,t=e.rules,i=void 0===t?[]:t,n=e.fieldContext;return i.map((function(e){return"function"===typeof e?e(n):e}))})),(0,h.Z)((0,f.Z)(r),"refresh",(function(){r.mounted&&r.setState((function(e){return{resetCount:e.resetCount+1}}))})),(0,h.Z)((0,f.Z)(r),"metaCache",null),(0,h.Z)((0,f.Z)(r),"triggerMetaEvent",(function(e){var t=r.props.onMetaChange;if(t){var i=(0,l.Z)((0,l.Z)({},r.getMeta()),{},{destroy:e});(0,m.Z)(r.metaCache,i)||t(i),r.metaCache=i}else r.metaCache=null})),(0,h.Z)((0,f.Z)(r),"onStoreChange",(function(e,t,i){var n=r.props,a=n.shouldUpdate,o=n.dependencies,s=void 0===o?[]:o,l=n.onReset,u=i.store,c=r.getNamePath(),d=r.getValue(e),f=r.getValue(u),g=t&&(0,C.T1)(t,c);switch("valueUpdate"===i.type&&"external"===i.source&&d!==f&&(r.touched=!0,r.dirty=!0,r.validatePromise=null,r.errors=b,r.warnings=b,r.triggerMetaEvent()),i.type){case"reset":if(!t||g)return r.touched=!1,r.dirty=!1,r.validatePromise=void 0,r.errors=b,r.warnings=b,r.triggerMetaEvent(),null===l||void 0===l||l(),void r.refresh();break;case"remove":if(a)return void r.reRender();break;case"setField":var v=i.data;if(g)return"touched"in v&&(r.touched=v.touched),"validating"in v&&!("originRCField"in v)&&(r.validatePromise=v.validating?Promise.resolve([]):null),"errors"in v&&(r.errors=v.errors||b),"warnings"in v&&(r.warnings=v.warnings||b),r.dirty=!0,r.triggerMetaEvent(),void r.reRender();if("value"in v&&(0,C.T1)(t,c,!0))return void r.reRender();if(a&&!c.length&&N(a,e,u,d,f,i))return void r.reRender();break;case"dependenciesUpdate":if(s.map(C.gU).some((function(e){return(0,C.T1)(i.relatedFields,e)})))return void r.reRender();break;default:if(g||(!s.length||c.length||a)&&N(a,e,u,d,f,i))return void r.reRender()}!0===a&&r.reRender()})),(0,h.Z)((0,f.Z)(r),"validateRules",(function(e){var t=r.getNamePath(),i=r.getValue(),n=e||{},a=n.triggerName,l=n.validateOnly,c=void 0!==l&&l,d=Promise.resolve().then((0,s.Z)((0,o.Z)().mark((function n(){var s,l,c,f,g,v,h;return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.mounted){n.next=2;break}return n.abrupt("return",[]);case 2:if(s=r.props,l=s.validateFirst,c=void 0!==l&&l,f=s.messageVariables,g=s.validateDebounce,v=r.getRules(),a&&(v=v.filter((function(e){return e})).filter((function(e){var t=e.validateTrigger;return!t||(0,P.q)(t).includes(a)}))),!g||!a){n.next=10;break}return n.next=8,new Promise((function(e){setTimeout(e,g)}));case 8:if(r.validatePromise===d){n.next=10;break}return n.abrupt("return",[]);case 10:return(h=(0,w.N)(t,i,v,e,c,f)).catch((function(e){return e})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;if(r.validatePromise===d){var t;r.validatePromise=null;var i=[],n=[];null===(t=e.forEach)||void 0===t||t.call(e,(function(e){var t=e.rule.warningOnly,r=e.errors,a=void 0===r?b:r;t?n.push.apply(n,(0,u.Z)(a)):i.push.apply(i,(0,u.Z)(a))})),r.errors=i,r.warnings=n,r.triggerMetaEvent(),r.reRender()}})),n.abrupt("return",h);case 13:case"end":return n.stop()}}),n)}))));return c||(r.validatePromise=d,r.dirty=!0,r.errors=b,r.warnings=b,r.triggerMetaEvent(),r.reRender()),d})),(0,h.Z)((0,f.Z)(r),"isFieldValidating",(function(){return!!r.validatePromise})),(0,h.Z)((0,f.Z)(r),"isFieldTouched",(function(){return r.touched})),(0,h.Z)((0,f.Z)(r),"isFieldDirty",(function(){return!(!r.dirty&&void 0===r.props.initialValue)||void 0!==(0,r.props.fieldContext.getInternalHooks(Z).getInitialValue)(r.getNamePath())})),(0,h.Z)((0,f.Z)(r),"getErrors",(function(){return r.errors})),(0,h.Z)((0,f.Z)(r),"getWarnings",(function(){return r.warnings})),(0,h.Z)((0,f.Z)(r),"isListField",(function(){return r.props.isListField})),(0,h.Z)((0,f.Z)(r),"isList",(function(){return r.props.isList})),(0,h.Z)((0,f.Z)(r),"isPreserve",(function(){return r.props.preserve})),(0,h.Z)((0,f.Z)(r),"getMeta",(function(){return r.prevValidating=r.isFieldValidating(),{touched:r.isFieldTouched(),validating:r.prevValidating,errors:r.errors,warnings:r.warnings,name:r.getNamePath(),validated:null===r.validatePromise}})),(0,h.Z)((0,f.Z)(r),"getOnlyChild",(function(e){if("function"===typeof e){var t=r.getMeta();return(0,l.Z)((0,l.Z)({},r.getOnlyChild(e(r.getControlled(),t,r.props.fieldContext))),{},{isFunction:!0})}var i=(0,p.Z)(e);return 1===i.length&&n.isValidElement(i[0])?{child:i[0],isFunction:!1}:{child:i,isFunction:!1}})),(0,h.Z)((0,f.Z)(r),"getValue",(function(e){var t=r.props.fieldContext.getFieldsValue,i=r.getNamePath();return(0,C.NA)(e||t(!0),i)})),(0,h.Z)((0,f.Z)(r),"getControlled",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.props,i=t.trigger,n=t.validateTrigger,a=t.getValueFromEvent,o=t.normalize,s=t.valuePropName,u=t.getValueProps,c=t.fieldContext,d=void 0!==n?n:c.validateTrigger,f=r.getNamePath(),g=c.getInternalHooks,v=c.getFieldsValue,p=g(Z).dispatch,m=r.getValue(),F=u||function(e){return(0,h.Z)({},s,e)},y=e[i],V=(0,l.Z)((0,l.Z)({},e),F(m));return V[i]=function(){var e;r.touched=!0,r.dirty=!0,r.triggerMetaEvent();for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];e=a?a.apply(void 0,i):C.iZ.apply(void 0,[s].concat(i)),o&&(e=o(e,m,v(!0))),p({type:"updateValue",namePath:f,value:e}),y&&y.apply(void 0,i)},(0,P.q)(d||[]).forEach((function(e){var t=V[e];V[e]=function(){t&&t.apply(void 0,arguments);var i=r.props.rules;i&&i.length&&p({type:"validateField",namePath:f,triggerName:e})}})),V})),e.fieldContext)&&(0,(0,e.fieldContext.getInternalHooks)(Z).initEntityValue)((0,f.Z)(r));return r}return(0,d.Z)(i,[{key:"componentDidMount",value:function(){var e=this.props,t=e.shouldUpdate,i=e.fieldContext;if(this.mounted=!0,i){var n=(0,i.getInternalHooks)(Z).registerField;this.cancelRegisterFunc=n(this)}!0===t&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var e,t=this.state.resetCount,i=this.props.children,r=this.getOnlyChild(i),a=r.child;return r.isFunction?e=a:n.isValidElement(a)?e=n.cloneElement(a,this.getControlled(a.props)):((0,F.ZP)(!a,"`children` of Field is not validate ReactElement."),e=a),n.createElement(n.Fragment,{key:t},e)}}]),i}(n.Component);(0,h.Z)(R,"contextType",V),(0,h.Z)(R,"defaultProps",{trigger:"onChange",valuePropName:"value"});const M=function(e){var t=e.name,i=(0,a.Z)(e,k),o=n.useContext(V),s=n.useContext(E),l=void 0!==t?(0,C.gU)(t):void 0,u="keep";return i.isListField||(u="_".concat((l||[]).join("_"))),n.createElement(R,(0,r.Z)({key:u,name:l,isListField:!!s},i,{fieldContext:o}))};const U=function(e){var t=e.name,i=e.initialValue,r=e.children,a=e.rules,o=e.validateTrigger,s=e.isListField,c=n.useContext(V),d=n.useContext(E),f=n.useRef({keys:[],id:0}).current,g=n.useMemo((function(){var e=(0,C.gU)(c.prefixName)||[];return[].concat((0,u.Z)(e),(0,u.Z)((0,C.gU)(t)))}),[c.prefixName,t]),v=n.useMemo((function(){return(0,l.Z)((0,l.Z)({},c),{},{prefixName:g})}),[c,g]),h=n.useMemo((function(){return{getKey:function(e){var t=g.length,i=e[t];return[f.keys[i],e.slice(t+1)]}}}),[g]);return"function"!==typeof r?((0,F.ZP)(!1,"Form.List only accepts function as children."),null):n.createElement(E.Provider,{value:h},n.createElement(V.Provider,{value:v},n.createElement(M,{name:[],shouldUpdate:function(e,t,i){return"internal"!==i.source&&e!==t},rules:a,validateTrigger:o,initialValue:i,isList:!0,isListField:null!==s&&void 0!==s?s:!!d},(function(e,t){var i=e.value,n=void 0===i?[]:i,a=e.onChange,o=c.getFieldValue,s=function(){return o(g||[])||[]},l={add:function(e,t){var i=s();t>=0&&t<=i.length?(f.keys=[].concat((0,u.Z)(f.keys.slice(0,t)),[f.id],(0,u.Z)(f.keys.slice(t))),a([].concat((0,u.Z)(i.slice(0,t)),[e],(0,u.Z)(i.slice(t))))):(f.keys=[].concat((0,u.Z)(f.keys),[f.id]),a([].concat((0,u.Z)(i),[e]))),f.id+=1},remove:function(e){var t=s(),i=new Set(Array.isArray(e)?e:[e]);i.size<=0||(f.keys=f.keys.filter((function(e,t){return!i.has(t)})),a(t.filter((function(e,t){return!i.has(t)}))))},move:function(e,t){if(e!==t){var i=s();e<0||e>=i.length||t<0||t>=i.length||(f.keys=(0,C.pB)(f.keys,e,t),a((0,C.pB)(i,e,t)))}}},d=n||[];return Array.isArray(d)||(d=[]),r(d.map((function(e,t){var i=f.keys[t];return void 0===i&&(f.keys[t]=f.id,i=f.keys[t],f.id+=1),{name:t,key:i,isListField:!0}})),l,t)}))))};var A=i(29439),T=i(71002),O=i(64233),x=i(42638),I=i(36104),L=i(91430),S=["name"],W=(0,d.Z)((function e(t){var i=this;(0,c.Z)(this,e),(0,h.Z)(this,"formHooked",!1),(0,h.Z)(this,"forceRootUpdate",void 0),(0,h.Z)(this,"subscribable",!0),(0,h.Z)(this,"store",{}),(0,h.Z)(this,"fieldEntities",[]),(0,h.Z)(this,"initialValues",{}),(0,h.Z)(this,"callbacks",{}),(0,h.Z)(this,"validateMessages",null),(0,h.Z)(this,"preserve",null),(0,h.Z)(this,"lastValidatePromise",null),(0,h.Z)(this,"getForm",(function(){return{getFieldValue:i.getFieldValue,getFieldsValue:i.getFieldsValue,getFieldError:i.getFieldError,getFieldWarning:i.getFieldWarning,getFieldsError:i.getFieldsError,isFieldsTouched:i.isFieldsTouched,isFieldTouched:i.isFieldTouched,isFieldValidating:i.isFieldValidating,isFieldsValidating:i.isFieldsValidating,resetFields:i.resetFields,setFields:i.setFields,setFieldValue:i.setFieldValue,setFieldsValue:i.setFieldsValue,validateFields:i.validateFields,submit:i.submit,_init:!0,getInternalHooks:i.getInternalHooks}})),(0,h.Z)(this,"getInternalHooks",(function(e){return e===Z?(i.formHooked=!0,{dispatch:i.dispatch,initEntityValue:i.initEntityValue,registerField:i.registerField,useSubscribe:i.useSubscribe,setInitialValues:i.setInitialValues,destroyForm:i.destroyForm,setCallbacks:i.setCallbacks,setValidateMessages:i.setValidateMessages,getFields:i.getFields,setPreserve:i.setPreserve,getInitialValue:i.getInitialValue,registerWatch:i.registerWatch}):((0,F.ZP)(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)})),(0,h.Z)(this,"useSubscribe",(function(e){i.subscribable=e})),(0,h.Z)(this,"prevWithoutPreserves",null),(0,h.Z)(this,"setInitialValues",(function(e,t){if(i.initialValues=e||{},t){var n,r=(0,x.T)(e,i.store);null===(n=i.prevWithoutPreserves)||void 0===n||n.map((function(t){var i=t.key;r=(0,C.sO)(r,i,(0,C.NA)(e,i))})),i.prevWithoutPreserves=null,i.updateStore(r)}})),(0,h.Z)(this,"destroyForm",(function(){var e=new L.Z;i.getFieldEntities(!0).forEach((function(t){i.isMergedPreserve(t.isPreserve())||e.set(t.getNamePath(),!0)})),i.prevWithoutPreserves=e})),(0,h.Z)(this,"getInitialValue",(function(e){var t=(0,C.NA)(i.initialValues,e);return e.length?(0,x.T)(t):t})),(0,h.Z)(this,"setCallbacks",(function(e){i.callbacks=e})),(0,h.Z)(this,"setValidateMessages",(function(e){i.validateMessages=e})),(0,h.Z)(this,"setPreserve",(function(e){i.preserve=e})),(0,h.Z)(this,"watchList",[]),(0,h.Z)(this,"registerWatch",(function(e){return i.watchList.push(e),function(){i.watchList=i.watchList.filter((function(t){return t!==e}))}})),(0,h.Z)(this,"notifyWatch",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(i.watchList.length){var t=i.getFieldsValue(),n=i.getFieldsValue(!0);i.watchList.forEach((function(i){i(t,n,e)}))}})),(0,h.Z)(this,"timeoutId",null),(0,h.Z)(this,"warningUnhooked",(function(){0})),(0,h.Z)(this,"updateStore",(function(e){i.store=e})),(0,h.Z)(this,"getFieldEntities",(function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?i.fieldEntities.filter((function(e){return e.getNamePath().length})):i.fieldEntities})),(0,h.Z)(this,"getFieldsMap",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new L.Z;return i.getFieldEntities(e).forEach((function(e){var i=e.getNamePath();t.set(i,e)})),t})),(0,h.Z)(this,"getFieldEntitiesForNamePathList",(function(e){if(!e)return i.getFieldEntities(!0);var t=i.getFieldsMap(!0);return e.map((function(e){var i=(0,C.gU)(e);return t.get(i)||{INVALIDATE_NAME_PATH:(0,C.gU)(e)}}))})),(0,h.Z)(this,"getFieldsValue",(function(e,t){var n,r,a;if(i.warningUnhooked(),!0===e||Array.isArray(e)?(n=e,r=t):e&&"object"===(0,T.Z)(e)&&(a=e.strict,r=e.filter),!0===n&&!r)return i.store;var o=i.getFieldEntitiesForNamePathList(Array.isArray(n)?n:null),s=[];return o.forEach((function(e){var t,i,o,l,u="INVALIDATE_NAME_PATH"in e?e.INVALIDATE_NAME_PATH:e.getNamePath();if(a){if(null!==(o=(l=e).isList)&&void 0!==o&&o.call(l))return}else if(!n&&null!==(t=(i=e).isListField)&&void 0!==t&&t.call(i))return;if(r){var c="getMeta"in e?e.getMeta():null;r(c)&&s.push(u)}else s.push(u)})),(0,C.H_)(i.store,s.map(C.gU))})),(0,h.Z)(this,"getFieldValue",(function(e){i.warningUnhooked();var t=(0,C.gU)(e);return(0,C.NA)(i.store,t)})),(0,h.Z)(this,"getFieldsError",(function(e){return i.warningUnhooked(),i.getFieldEntitiesForNamePathList(e).map((function(t,i){return t&&!("INVALIDATE_NAME_PATH"in t)?{name:t.getNamePath(),errors:t.getErrors(),warnings:t.getWarnings()}:{name:(0,C.gU)(e[i]),errors:[],warnings:[]}}))})),(0,h.Z)(this,"getFieldError",(function(e){i.warningUnhooked();var t=(0,C.gU)(e);return i.getFieldsError([t])[0].errors})),(0,h.Z)(this,"getFieldWarning",(function(e){i.warningUnhooked();var t=(0,C.gU)(e);return i.getFieldsError([t])[0].warnings})),(0,h.Z)(this,"isFieldsTouched",(function(){i.warningUnhooked();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,a=t[0],o=t[1],s=!1;0===t.length?r=null:1===t.length?Array.isArray(a)?(r=a.map(C.gU),s=!1):(r=null,s=a):(r=a.map(C.gU),s=o);var l=i.getFieldEntities(!0),c=function(e){return e.isFieldTouched()};if(!r)return s?l.every(c):l.some(c);var d=new L.Z;r.forEach((function(e){d.set(e,[])})),l.forEach((function(e){var t=e.getNamePath();r.forEach((function(i){i.every((function(e,i){return t[i]===e}))&&d.update(i,(function(t){return[].concat((0,u.Z)(t),[e])}))}))}));var f=function(e){return e.some(c)},g=d.map((function(e){return e.value}));return s?g.every(f):g.some(f)})),(0,h.Z)(this,"isFieldTouched",(function(e){return i.warningUnhooked(),i.isFieldsTouched([e])})),(0,h.Z)(this,"isFieldsValidating",(function(e){i.warningUnhooked();var t=i.getFieldEntities();if(!e)return t.some((function(e){return e.isFieldValidating()}));var n=e.map(C.gU);return t.some((function(e){var t=e.getNamePath();return(0,C.T1)(n,t)&&e.isFieldValidating()}))})),(0,h.Z)(this,"isFieldValidating",(function(e){return i.warningUnhooked(),i.isFieldsValidating([e])})),(0,h.Z)(this,"resetWithFieldInitialValue",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new L.Z,n=i.getFieldEntities(!0);n.forEach((function(e){var i=e.props.initialValue,n=e.getNamePath();if(void 0!==i){var r=t.get(n)||new Set;r.add({entity:e,value:i}),t.set(n,r)}}));var r;e.entities?r=e.entities:e.namePathList?(r=[],e.namePathList.forEach((function(e){var i,n=t.get(e);n&&(i=r).push.apply(i,(0,u.Z)((0,u.Z)(n).map((function(e){return e.entity}))))}))):r=n,r.forEach((function(n){if(void 0!==n.props.initialValue){var r=n.getNamePath();if(void 0!==i.getInitialValue(r))(0,F.ZP)(!1,"Form already set 'initialValues' with path '".concat(r.join("."),"'. Field can not overwrite it."));else{var a=t.get(r);if(a&&a.size>1)(0,F.ZP)(!1,"Multiple Field with path '".concat(r.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(a){var o=i.getFieldValue(r);e.skipExist&&void 0!==o||i.updateStore((0,C.sO)(i.store,r,(0,u.Z)(a)[0].value))}}}}))})),(0,h.Z)(this,"resetFields",(function(e){i.warningUnhooked();var t=i.store;if(!e)return i.updateStore((0,x.T)(i.initialValues)),i.resetWithFieldInitialValue(),i.notifyObservers(t,null,{type:"reset"}),void i.notifyWatch();var n=e.map(C.gU);n.forEach((function(e){var t=i.getInitialValue(e);i.updateStore((0,C.sO)(i.store,e,t))})),i.resetWithFieldInitialValue({namePathList:n}),i.notifyObservers(t,n,{type:"reset"}),i.notifyWatch(n)})),(0,h.Z)(this,"setFields",(function(e){i.warningUnhooked();var t=i.store,n=[];e.forEach((function(e){var r=e.name,o=(0,a.Z)(e,S),s=(0,C.gU)(r);n.push(s),"value"in o&&i.updateStore((0,C.sO)(i.store,s,o.value)),i.notifyObservers(t,[s],{type:"setField",data:e})})),i.notifyWatch(n)})),(0,h.Z)(this,"getFields",(function(){return i.getFieldEntities(!0).map((function(e){var t=e.getNamePath(),n=e.getMeta(),r=(0,l.Z)((0,l.Z)({},n),{},{name:t,value:i.getFieldValue(t)});return Object.defineProperty(r,"originRCField",{value:!0}),r}))})),(0,h.Z)(this,"initEntityValue",(function(e){var t=e.props.initialValue;if(void 0!==t){var n=e.getNamePath();void 0===(0,C.NA)(i.store,n)&&i.updateStore((0,C.sO)(i.store,n,t))}})),(0,h.Z)(this,"isMergedPreserve",(function(e){var t=void 0!==e?e:i.preserve;return null===t||void 0===t||t})),(0,h.Z)(this,"registerField",(function(e){i.fieldEntities.push(e);var t=e.getNamePath();if(i.notifyWatch([t]),void 0!==e.props.initialValue){var n=i.store;i.resetWithFieldInitialValue({entities:[e],skipExist:!0}),i.notifyObservers(n,[e.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(n,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(i.fieldEntities=i.fieldEntities.filter((function(t){return t!==e})),!i.isMergedPreserve(r)&&(!n||a.length>1)){var o=n?void 0:i.getInitialValue(t);if(t.length&&i.getFieldValue(t)!==o&&i.fieldEntities.every((function(e){return!(0,C.LX)(e.getNamePath(),t)}))){var s=i.store;i.updateStore((0,C.sO)(s,t,o,!0)),i.notifyObservers(s,[t],{type:"remove"}),i.triggerDependenciesUpdate(s,t)}}i.notifyWatch([t])}})),(0,h.Z)(this,"dispatch",(function(e){switch(e.type){case"updateValue":var t=e.namePath,n=e.value;i.updateValue(t,n);break;case"validateField":var r=e.namePath,a=e.triggerName;i.validateFields([r],{triggerName:a})}})),(0,h.Z)(this,"notifyObservers",(function(e,t,n){if(i.subscribable){var r=(0,l.Z)((0,l.Z)({},n),{},{store:i.getFieldsValue(!0)});i.getFieldEntities().forEach((function(i){(0,i.onStoreChange)(e,t,r)}))}else i.forceRootUpdate()})),(0,h.Z)(this,"triggerDependenciesUpdate",(function(e,t){var n=i.getDependencyChildrenFields(t);return n.length&&i.validateFields(n),i.notifyObservers(e,n,{type:"dependenciesUpdate",relatedFields:[t].concat((0,u.Z)(n))}),n})),(0,h.Z)(this,"updateValue",(function(e,t){var n=(0,C.gU)(e),r=i.store;i.updateStore((0,C.sO)(i.store,n,t)),i.notifyObservers(r,[n],{type:"valueUpdate",source:"internal"}),i.notifyWatch([n]);var a=i.triggerDependenciesUpdate(r,n),o=i.callbacks.onValuesChange;o&&o((0,C.H_)(i.store,[n]),i.getFieldsValue());i.triggerOnFieldsChange([n].concat((0,u.Z)(a)))})),(0,h.Z)(this,"setFieldsValue",(function(e){i.warningUnhooked();var t=i.store;if(e){var n=(0,x.T)(i.store,e);i.updateStore(n)}i.notifyObservers(t,null,{type:"valueUpdate",source:"external"}),i.notifyWatch()})),(0,h.Z)(this,"setFieldValue",(function(e,t){i.setFields([{name:e,value:t}])})),(0,h.Z)(this,"getDependencyChildrenFields",(function(e){var t=new Set,n=[],r=new L.Z;i.getFieldEntities().forEach((function(e){(e.props.dependencies||[]).forEach((function(t){var i=(0,C.gU)(t);r.update(i,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return t.add(e),t}))}))}));return function e(i){(r.get(i)||new Set).forEach((function(i){if(!t.has(i)){t.add(i);var r=i.getNamePath();i.isFieldDirty()&&r.length&&(n.push(r),e(r))}}))}(e),n})),(0,h.Z)(this,"triggerOnFieldsChange",(function(e,t){var n=i.callbacks.onFieldsChange;if(n){var r=i.getFields();if(t){var a=new L.Z;t.forEach((function(e){var t=e.name,i=e.errors;a.set(t,i)})),r.forEach((function(e){e.errors=a.get(e.name)||e.errors}))}var o=r.filter((function(t){var i=t.name;return(0,C.T1)(e,i)}));o.length&&n(o,r)}})),(0,h.Z)(this,"validateFields",(function(e,t){var n,r,a;i.warningUnhooked(),Array.isArray(e)||"string"===typeof e||"string"===typeof t?(r=e,a=t):a=e;var o=!!r,s=o?r.map(C.gU):[],c=[],d=String(Date.now()),f=new Set,g=null===(n=a)||void 0===n?void 0:n.recursive;i.getFieldEntities(!0).forEach((function(e){if(o||s.push(e.getNamePath()),e.props.rules&&e.props.rules.length){var t=e.getNamePath();if(f.add(t.join(d)),!o||(0,C.T1)(s,t,g)){var n=e.validateRules((0,l.Z)({validateMessages:(0,l.Z)((0,l.Z)({},I.y),i.validateMessages)},a));c.push(n.then((function(){return{name:t,errors:[],warnings:[]}})).catch((function(e){var i,n=[],r=[];return null===(i=e.forEach)||void 0===i||i.call(e,(function(e){var t=e.rule.warningOnly,i=e.errors;t?r.push.apply(r,(0,u.Z)(i)):n.push.apply(n,(0,u.Z)(i))})),n.length?Promise.reject({name:t,errors:n,warnings:r}):{name:t,errors:n,warnings:r}})))}}}));var v=(0,O.v)(c);i.lastValidatePromise=v,v.catch((function(e){return e})).then((function(e){var t=e.map((function(e){return e.name}));i.notifyObservers(i.store,t,{type:"validateFinish"}),i.triggerOnFieldsChange(t,e)}));var h=v.then((function(){return i.lastValidatePromise===v?Promise.resolve(i.getFieldsValue(s)):Promise.reject([])})).catch((function(e){var t=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:i.getFieldsValue(s),errorFields:t,outOfDate:i.lastValidatePromise!==v})}));h.catch((function(e){return e}));var p=s.filter((function(e){return f.has(e.join(d))}));return i.triggerOnFieldsChange(p),h})),(0,h.Z)(this,"submit",(function(){i.warningUnhooked(),i.validateFields().then((function(e){var t=i.callbacks.onFinish;if(t)try{t(e)}catch(n){}})).catch((function(e){var t=i.callbacks.onFinishFailed;t&&t(e)}))})),this.forceRootUpdate=t}));const H=function(e){var t=n.useRef(),i=n.useState({}),r=(0,A.Z)(i,2)[1];if(!t.current)if(e)t.current=e;else{var a=new W((function(){r({})}));t.current=a.getForm()}return[t.current]};var D=n.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),_=function(e){var t=e.validateMessages,i=e.onFormChange,r=e.onFormFinish,a=e.children,o=n.useContext(D),s=n.useRef({});return n.createElement(D.Provider,{value:(0,l.Z)((0,l.Z)({},o),{},{validateMessages:(0,l.Z)((0,l.Z)({},o.validateMessages),t),triggerFormChange:function(e,t){i&&i(e,{changedFields:t,forms:s.current}),o.triggerFormChange(e,t)},triggerFormFinish:function(e,t){r&&r(e,{values:t,forms:s.current}),o.triggerFormFinish(e,t)},registerForm:function(e,t){e&&(s.current=(0,l.Z)((0,l.Z)({},s.current),{},(0,h.Z)({},e,t))),o.registerForm(e,t)},unregisterForm:function(e){var t=(0,l.Z)({},s.current);delete t[e],s.current=t,o.unregisterForm(e)}})},a)};const j=D;var z=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"];const q=function(e,t){var i=e.name,o=e.initialValues,s=e.fields,u=e.form,c=e.preserve,d=e.children,f=e.component,g=void 0===f?"form":f,v=e.validateMessages,h=e.validateTrigger,p=void 0===h?"onChange":h,m=e.onValuesChange,F=e.onFieldsChange,y=e.onFinish,P=e.onFinishFailed,w=(0,a.Z)(e,z),k=n.useContext(j),b=H(u),N=(0,A.Z)(b,1)[0],R=N.getInternalHooks(Z),M=R.useSubscribe,U=R.setInitialValues,T=R.setCallbacks,O=R.setValidateMessages,x=R.setPreserve,I=R.destroyForm;n.useImperativeHandle(t,(function(){return N})),n.useEffect((function(){return k.registerForm(i,N),function(){k.unregisterForm(i)}}),[k,N,i]),O((0,l.Z)((0,l.Z)({},k.validateMessages),v)),T({onValuesChange:m,onFieldsChange:function(e){if(k.triggerFormChange(i,e),F){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];F.apply(void 0,[e].concat(n))}},onFinish:function(e){k.triggerFormFinish(i,e),y&&y(e)},onFinishFailed:P}),x(c);var L,S=n.useRef(null);U(o,!S.current),S.current||(S.current=!0),n.useEffect((function(){return I}),[]);var W="function"===typeof d;W?L=d(N.getFieldsValue(!0),N):L=d;M(!W);var D=n.useRef();n.useEffect((function(){(0,C.T0)(D.current||[],s||[])||N.setFields(s||[]),D.current=s}),[s,N]);var _=n.useMemo((function(){return(0,l.Z)((0,l.Z)({},N),{},{validateTrigger:p})}),[N,p]),q=n.createElement(E.Provider,{value:null},n.createElement(V.Provider,{value:_},L));return!1===g?q:n.createElement(g,(0,r.Z)({},w,{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),N.submit()},onReset:function(e){var t;e.preventDefault(),N.resetFields(),null===(t=w.onReset)||void 0===t||t.call(w,e)}}),q)};function B(e){try{return JSON.stringify(e)}catch(t){return Math.random()}}var Y=function(){};const K=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=t[0],a=void 0===r?[]:r,o=t[1],s=void 0===o?{}:o,l=(0,P.G)(s)?{form:s}:s,u=l.form,c=(0,n.useState)(),d=(0,A.Z)(c,2),f=d[0],g=d[1],v=(0,n.useMemo)((function(){return B(f)}),[f]),h=(0,n.useRef)(v);h.current=v;var p=(0,n.useContext)(V),m=u||p,F=m&&m._init,y=(0,C.gU)(a),E=(0,n.useRef)(y);return E.current=y,Y(y),(0,n.useEffect)((function(){if(F){var e=m.getFieldsValue,t=(0,(0,m.getInternalHooks)(Z).registerWatch)((function(e,t){var i=(0,C.NA)(l.preserve?t:e,E.current),n=B(i);h.current!==n&&(h.current=n,g(i))})),i=(0,C.NA)(l.preserve?e(!0):e(),E.current);return f!==i&&g(i),t}}),[F]),f};var Q=n.forwardRef(q);Q.FormProvider=_,Q.Field=M,Q.List=U,Q.useForm=H,Q.useWatch=K;const X=Q}}]);
//# sourceMappingURL=3908.f98c5d2a.js.map